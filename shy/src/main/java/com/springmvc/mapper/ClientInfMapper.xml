<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.springmvc.mapper.ClientInfMapper" >
    <resultMap id="ClientOrderMap" type="com.springmvc.entity.ClientInf" >
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="id" property="id" jdbcType="INTEGER" />
        <result column="cname" property="cname" jdbcType="VARCHAR" />
        <result column="cposition" property="cposition" jdbcType="VARCHAR" />
        <result column="cphone" property="cphone" jdbcType="VARCHAR" />
        <result column="sex" property="sex" jdbcType="INTEGER" />
        <result column="endaddress" property="endaddress" jdbcType="VARCHAR" />
        <result column="ctype" property="ctype" jdbcType="VARCHAR" />
        <result column="del" property="del" jdbcType="INTEGER"/>

    </resultMap>

    <!--查询指定行数据-->
    <select id="queryAllByLimit" resultMap="ClientOrderMap">
        select
            id,cname,cposition,cphone,sex,endaddress,ctype
        from clientinf
        limit #{offset}, #{limit}

    </select>

    <!--查询全部用户订单信息-->
    <select id="queryClientAll" resultMap="ClientOrderMap">
        select
            *
        from clientinf
        where del=1
    </select>
    <!--查询全部用户订单信息-->
    <select id="queryClientByInf" resultMap="ClientOrderMap">
        select
        *
        from clientinf
        <where>
            <if test="cname != null and cname != ''">
                and cname = #{cname}
            </if>
            <if test="cposition != null">
                and cposition = #{cposition}
            </if>
            <if test="sex != null">
                and sex = #{sex}
            </if>
            <if test="endaddress != null">
                and endaddress = #{endaddress}
            </if>
            <if test="ctype != null">
                and ctype = #{ctype}
            </if>
            and del=1
        </where>
    </select>

    <!--新增所有列-->
    <insert id="insert" keyProperty="id" useGeneratedKeys="true" >
        insert into clientinf(id,cname,cposition,cphone,sex,endaddress,ctype)
        values (#{id},#{cname}, #{cposition}, #{cphone}, #{sex}, #{endaddress}, #{ctype})
    </insert>

    <!--通过主键修改数据-->
    <update id="update">
        update clientinf
        <set>
            <if test="cname != null and cname != ''">
                cname = #{cname},
            </if>
            <if test="cposition != null">
                cposition = #{cposition},
            </if>
            <if test="sex != null">
                sex = #{sex},
            </if>
            <if test="endaddress != null">
                endaddress = #{endaddress},
            </if>
            <if test="ctype != null">
                ctype = #{ctype}
            </if>
        </set>
        where id = #{id}
    </update>
    <!-- 删除功能 -->
    <update id="deleteById">
        update clientinf  set del = 0 where id = #{id}
    </update>

    <select id="CountAll" resultType="java.lang.Integer">
        SELECT COUNT(*) FROM clientinf
    </select>
</mapper>