<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.springmvc.mapper.ClientOrderMapper" >
    <resultMap id="ClientOrderMap" type="com.springmvc.entity.ClientOrder" >
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="oid" property="oid" jdbcType="INTEGER" />
        <result column="cname" property="cname" jdbcType="VARCHAR" />
        <result column="cargo" property="cargo" jdbcType="VARCHAR" />
        <result column="oname" property="oname" jdbcType="VARCHAR" />
        <result column="price" property="price" jdbcType="OTHER" />
        <result column="number" property="number" jdbcType="INTEGER" />
        <result column="total" property="total" jdbcType="OTHER" />
        <result column="odate" property="odate" jdbcType="TIMESTAMP"/>
        <result column="ostatus" property="ostatus" jdbcType="INTEGER"/>
        <result column="endaddress" property="endaddress" jdbcType="VARCHAR" />
        <result column="idea" property="idea" jdbcType="VARCHAR" />
        <result column="del" property="del" jdbcType="INTEGER"/>

    </resultMap>

    <!--查询指定行数据-->
    <select id="queryAllByLimit" resultMap="ClientOrderMap">
        select
            oid,cname,cargo,oname,price,number,total,odate,ostatus,endaddress,idea
        from clientorder
        limit #{offset}, #{limit}

    </select>
    <!--查询全部用户订单信息-->
    <select id="queryClientOrderAll" resultMap="ClientOrderMap">
        select
            *
        from clientorder
        where del=1
    </select>

    <!--查询全部用户订单信息-->
    <select id="queryClientOrderByInf" resultMap="ClientOrderMap">
        select
        *
        from clientorder
        <where>
            <if test="cname != null and cname != ''">
                and cname = #{cname}
            </if>
            <if test="cargo != null">
                and cargo = #{cargo}
            </if>
            <if test="oname != null">
                and oname = #{oname}
            </if>
            <if test="price != null">
                and price = #{price}
            </if>
            <if test="number != null">
                and number = #{number}
            </if>
            <if test="odate != null and odate != ''">
                and odate = #{odate}
            </if>
            <if test="ostatus != null">
                and ostatus = #{ostatus}
            </if>
            <if test="endaddress != null">
                and endaddress = #{endaddress}
            </if>
            <if test="idea != null">
                and idea = #{idea}
            </if>
            and del=1
        </where>
    </select>

    <!--新增所有列-->
    <insert id="insert" keyProperty="id" useGeneratedKeys="true" >
        insert into clientorder(oid,cname,cargo,oname,price,number,total,odate,ostatus,endaddress,idea)
        values (#{oid},#{cname}, #{cargo}, #{oname}, #{price}, #{number}, #{total}, #{odate}, #{ostatus}, #{endaddress}, #{idea})
    </insert>
    <!--通过主键修改数据-->
    <update id="update">
        update clientorder
        <set>
            <if test="cname != null and cname != ''">
                cname = #{cname},
            </if>
            <if test="cargo != null">
                cargo = #{cargo},
            </if>
            <if test="oname != null">
                oname = #{oname},
            </if>
            <if test="price != null">
                price = #{price},
            </if>
            <if test="number != null">
                number = #{number},
            </if>
            <if test="odate != null and odate != ''">
                odate = #{odate},
            </if>
            <if test="total != null and total != ''">
                total = #{total},
            </if>
            <if test="ostatus != null">
                ostatus = #{ostatus},
            </if>
            <if test="endaddress != null">
                endaddress = #{endaddress},
            </if>
            <if test="idea != null">
                idea = #{idea},
            </if>
        </set>
        where oid = #{oid}
    </update>

    <!-- 删除功能 -->
    <update id="OrderdeleteById">
        update clientorder  set del = 0 where oid = #{oid}
    </update>

</mapper>